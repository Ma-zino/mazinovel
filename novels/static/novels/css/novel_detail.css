/* mazinovel/novels/static/novels/css/novel_detail.css */
/* Styles specific to the novel detail page, including new Reviews Section & Modal */

/* --- Breadcrumb --- */
.breadcrumb-container { padding: 0.75em 0; margin-bottom: 1.5em; }
.breadcrumb { display: flex; align-items: center; list-style: none; font-size: 0.875rem; font-family: var(--font-primary); padding: 0; margin: 0; flex-wrap: wrap; }
.breadcrumb-item { color: var(--text-dark-secondary); display: flex; align-items: center;}
.breadcrumb-item a { color: var(--text-dark-secondary); text-decoration: none; }
.breadcrumb-item a:hover { text-decoration: underline; color: var(--text-dark-primary); }
.breadcrumb-item + .breadcrumb-item::before { content: "/"; padding: 0 0.7em; color: var(--text-dark-secondary); opacity: 0.6; }
.breadcrumb-item:last-child { color: var(--text-dark-primary); font-weight: 500; }

/* --- Main Content Wrapper --- */
.main-content { }

/* --- Novel Header Section --- */
.novel-header { display: grid; grid-template-columns: 240px 1fr; gap: 3em; margin-bottom: 2.5em; padding-bottom: 1.5em; border-bottom: 1px solid var(--border-light); }
/* Cover Column */
.novel-cover { position: relative; }
.novel-cover img { width: 100%; height: auto; aspect-ratio: 2 / 3; object-fit: cover; border-radius: var(--border-radius-base); box-shadow: 0 5px 15px rgba(0,0,0,0.12); display: block; }
.cover-badges { position: absolute; top: 12px; left: 12px; display: flex; flex-direction: column; gap: 8px; z-index: 2;}
.badge.badge-main-type, .badge.status-badge { display: inline-block; padding: 0.25em 0.8em; background-color: var(--cta-button-bg); color: white; font-size: 0.75rem; font-weight: 500; line-height: 1.3; border-radius: var(--border-radius-base); text-transform: uppercase; text-shadow: 1px 1px 1px rgba(0,0,0,0.2); }
.badge.status-badge.status-completed { background-color: #198754; }
.badge.status-badge.status-on-hold { background-color: #ffc107; color: var(--black); }
.badge.status-badge.status-dropped { background-color: #dc3545; }
/* Info Column */
.novel-info { display: flex; flex-direction: column; align-items: flex-start; }
.novel-title { font-size: 2rem; font-weight: 700; margin: 0 0 0.5em 0; line-height: 1.25; color: var(--text-dark-primary);}
.novel-meta { display: flex; flex-wrap: wrap; align-items: center; margin-bottom: 1em; font-size: 0.875rem; gap: 0.5em 1.2em; color: var(--text-dark-secondary); }
.meta-item { display: flex; align-items: center; gap: 0.4em; font-family: var(--font-primary); }
.meta-item .stat-icon { width: 16px; height: 16px; fill: currentColor; opacity: 0.7; flex-shrink: 0; display: inline-block; vertical-align: middle;}
.meta-item span { line-height: 1; }
.genre-item span { background-color: var(--bg-light-secondary); padding: 0.1em 0.6em; border-radius: 3px; border: 1px solid var(--border-light);}
.author-info { margin-bottom: 1em; font-size: 0.95rem; }
.author-info span { color: var(--text-dark-secondary); }
.author-info .author-name { color: var(--link-primary); font-weight: 500; text-decoration: none;}
.author-info .author-name:hover { color: var(--link-primary-hover); text-decoration: underline;}

/* SIMPLIFIED RATING DISPLAY (in info column) */
.user-rating-section.simplified-rating { margin-top: 0; margin-bottom: 1em; padding: 0; background-color: transparent; border: none; font-size: 1rem; }
.simplified-rating .rating-display-static { gap: 0.4em; margin-bottom: 0; }
.simplified-rating .rating-label { display: none; } /* Hide "Rating:" text here */
.simplified-rating .stars-display { color: #f59e0b; line-height: 1; font-size: 1.1em;}
.simplified-rating .stars-display .star-icon { width: 16px; height: 16px; }
.simplified-rating .rating-display-score { font-weight: 600; color: var(--text-dark-primary); font-size: 1rem;}
.simplified-rating .rating-display-count { color: var(--text-dark-secondary); font-size: 0.875rem; }
.simplified-rating hr.rating-divider { display: none; }
/* Hide old form elements if still present in DOM before logic removed */
.simplified-rating .rating-form, .simplified-rating .rating-login-prompt { display: none; }


.action-buttons { display: flex; gap: 1em; margin-top: 1.5em; } /* Added more top margin */
.btn { padding: 0.7em 1.8em; border-radius: var(--border-radius-base); font-weight: 500; font-size: 0.95rem; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; gap: 8px; text-decoration: none; border: 1px solid transparent; transition: all 0.2s ease; line-height: 1.4;}
.btn-primary { background-color: var(--cta-button-bg); color: white; border-color: var(--cta-button-bg); }
.btn-primary:hover { background-color: var(--cta-button-hover-bg); border-color: var(--cta-button-hover-bg); color: white; }
.btn-secondary { background-color: var(--white); color: var(--text-dark-primary); border: 1px solid var(--border-light); }
.btn-secondary:hover { background-color: var(--bg-light-secondary); border-color: #ccc; }
.btn.disabled { background-color: #ccc; border-color: #ccc; color: #777; cursor: not-allowed; opacity: 0.7; }
.report-link { margin-top: 1em; font-size: 0.85rem; }
.report-link a { color: var(--text-dark-secondary); text-decoration: underline; }
.report-link a:hover { color: var(--error-red); }

/* --- Tabs Section --- */
.tabs-section { margin-top: 2.5em; }
.tab-nav { display: flex; gap: 2em; margin-bottom: -1px; border-bottom: 1px solid var(--border-light);}
.tab-btn { padding: 0.8em 0.2em; font-size: 1.1rem; font-weight: 500; color: var(--text-dark-secondary); background: none; border: none; border-bottom: 2px solid transparent; cursor: pointer; transition: color 0.2s ease, border-color 0.2s ease; margin-bottom: -1px; }
.tab-btn.active { color: var(--text-dark-primary); border-bottom-color: var(--text-dark-primary); }
.tab-btn:hover { color: var(--text-dark-primary); }
.tab-content-wrapper { border-top: 1px solid var(--border-light); padding-top: 1.5em; }
.tab-content { display: none; animation: fadeIn 0.3s ease-in-out; }
.tab-content.active { display: block; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0);} }
.tab-content h3 { font-size: 1.4rem; color: var(--text-dark-primary); margin: 0 0 1em 0; }
.synopsis { color: var(--text-dark-secondary); line-height: 1.8; font-size: 1rem; }
.chapter-list.chapter-list-inline { list-style: none; padding: 0; margin: 0; }
.chapter-list.chapter-list-inline li { border-bottom: 1px solid var(--border-light); }
.chapter-list.chapter-list-inline li:last-child { border-bottom: none; }
.chapter-list.chapter-list-inline li a { display: block; padding: 0.8em 0.5em; font-size: 1rem; font-weight: 500; color: var(--text-dark-secondary); text-decoration: none; transition: background-color 0.2s ease, color 0.2s ease; }
.chapter-list.chapter-list-inline li a:hover { background-color: var(--bg-light-secondary); color: var(--text-dark-primary); }


/* ==========================================================================
   4b. Reviews Section Styles (NEW)
   ========================================================================== */

.reviews-section { margin-top: 3em; padding-top: 1.5em; border-top: 1px solid var(--border-light); }
.reviews-section h2 { margin-top: 0; margin-bottom: 1em; font-size: 1.5rem; font-weight: 600; color: var(--text-dark-primary); }
.review-summary { display: flex; flex-wrap: wrap; gap: 2em; align-items: center; background-color: var(--bg-light-secondary); border: 1px solid var(--border-light); padding: 1.5em; border-radius: var(--border-radius-lg); margin-bottom: 2em; }
.summary-average { display: flex; flex-direction: column; align-items: center; padding-right: 2em; border-right: 1px solid var(--border-light); min-width: 100px; }
.summary-average .avg-score { font-size: 2rem; font-weight: 700; color: var(--text-dark-primary); line-height: 1; }
.summary-average .stars-display { color: #f59e0b; line-height: 1; margin-top: 0.2em; }
.summary-average .stars-display svg { width: 18px; height: 18px; fill: currentColor; margin: 0 1px; vertical-align: middle; }
.criteria-list { flex-grow: 1; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.6em 1.5em; font-family: var(--font-primary); font-size: 0.9rem; }
.criterion-item { display: flex; justify-content: space-between; align-items: center; }
.criterion-label { color: var(--text-dark-secondary); white-space: nowrap; margin-right: 1em; }
.criterion-stars { color: #f59e0b; line-height: 1; white-space: nowrap; }
.criterion-stars svg { width: 14px; height: 14px; fill: currentColor; margin: 0 1px; vertical-align: middle; }
.write-review-action { margin-left: auto; padding-left: 2em; }
.write-review-btn { background-color: var(--cta-button-bg); color: var(--cta-button-text); border: none; padding: 0.6em 1.5em; font-size: 0.95rem; font-weight: 500; border-radius: var(--border-radius-base); cursor: pointer; transition: background-color 0.2s ease; text-decoration: none; display: inline-block;} /* Make sure it looks like a button */
.write-review-btn:hover { background-color: var(--cta-button-hover-bg); color: var(--cta-button-text); }
.existing-reviews { margin-top: 2em; }
.existing-reviews h4 { margin-bottom: 1em; font-size: 1.2rem; color: var(--text-dark-primary); }

/* --- Modal Styles --- */
.modal { display: none; position: fixed; z-index: 1050; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.5); }
.modal.is-open { display: flex; align-items: center; justify-content: center; }
.modal-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; cursor: pointer; }
.modal-content { position: relative; background-color: var(--white); margin: auto; padding: 25px 30px; border: 1px solid #888; width: 90%; max-width: 650px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); border-radius: var(--border-radius-lg); z-index: 1051; max-height: 90vh; display: flex; flex-direction: column; }
.modal-close { position: absolute; top: 10px; right: 15px; color: #aaa; font-size: 28px; font-weight: bold; background: none; border: none; padding: 0; line-height: 1; cursor: pointer; transition: color 0.2s ease; }
.modal-close:hover, .modal-close:focus { color: black; text-decoration: none; }
.modal-content h2 { margin-top: 0; margin-bottom: 1em; font-size: 1.5rem; }
.modal-body { flex-grow: 1; overflow-y: auto; padding-right: 10px; } /* Should wrap form */
.review-criteria-ratings { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1em 2em; margin-bottom: 1.5em; padding-bottom: 1.5em; border-bottom: 1px solid var(--border-light); }
.review-criterion-item { display: flex; flex-direction: column; align-items: flex-start; gap: 0.3em; }
.review-criterion-item label { font-size: 0.95rem; font-weight: 500; color: var(--text-dark-secondary); }
.review-criterion-item .star-rating-input { margin-bottom: 0; }
.review-criterion-item.total-score-display { grid-column: span 2; flex-direction: row; align-items: center; margin-top: 0.5em; background-color: var(--bg-light-secondary); padding: 0.5em 1em; border-radius: var(--border-radius-base); }
.total-score-display label { margin-bottom: 0; }
.total-score-display .total-stars { margin-left: auto; font-size: 1.2em;}
#total-score-val { font-weight: bold; margin-right: 0.3em; }
.review-text-area { margin-bottom: 1.5em; }
.review-text-area textarea { width: 100%; padding: 10px 12px; font-family: var(--font-primary); font-size: 0.95rem; line-height: 1.5; border: 1px solid var(--border-light); border-radius: var(--border-radius-base); resize: vertical; min-height: 100px; }
.modal-footer.review-form-footer { display: flex; justify-content: space-between; align-items: center; margin-top: 1em; padding-top: 1em; border-top: 1px solid var(--border-light); }
.review-options { display: flex; gap: 0.5em; align-items: center;}
.post-review-btn { /* Inherit from .btn? */ }


/* --- Responsive Novel Detail --- */
@media (max-width: 992px) {
    .novel-header { grid-template-columns: 200px 1fr; gap: 1.5em; }
    .novel-info .novel-title { font-size: 1.8rem; }
    /* Reviews Responsive */
     .review-summary { gap: 1.5em; padding: 1em;}
     .summary-average { padding-right: 1.5em; }
     .criteria-list { gap: 0.5em 1em;}
     .write-review-action { padding-left: 1em;}
}
@media (max-width: 768px) {
    .novel-header { grid-template-columns: 1fr; text-align: center; gap: 1.5em; }
    .novel-cover { max-width: 240px; margin: 0 auto; }
    .novel-info { text-align: center; align-items: center; }
    .novel-meta, .rating, .action-buttons { justify-content: center; } /* Remove .rating here? Rating moved */
     .simplified-rating .rating-display-static { justify-content: center; } /* Center simplified rating display */
    .report-link { text-align: center; }
    .tab-nav { justify-content: center; }

    /* Reviews Responsive */
     .review-summary { flex-direction: column; align-items: stretch; gap: 1.5em; }
     .summary-average { border-right: none; padding-right: 0; border-bottom: 1px solid var(--border-light); padding-bottom: 1.5em; margin-bottom: 1em; text-align: center;}
     .criteria-list { grid-template-columns: 1fr; }
     .write-review-action { margin: 1em auto 0 auto; padding-left: 0; text-align: center;}
     /* Modal Responsive */
     .review-criteria-ratings { grid-template-columns: 1fr; }
     .review-criterion-item.total-score-display { grid-column: span 1; }
     .modal-content { width: 95%; padding: 20px; }
     .modal-footer.review-form-footer { flex-direction: column; gap: 1em; align-items: flex-end;}
     .review-options { order: 2; align-self: flex-start; }
}
@media (max-width: 480px) {
    .novel-info .novel-title { font-size: 1.6rem; }
    .action-buttons { flex-direction: column; align-items: center; }
    .btn { width: 80%; text-align: center; }
    .tab-btn { font-size: 1rem; }
     /* Modal Responsive */
     .modal-content h2 { font-size: 1.3rem; }

}